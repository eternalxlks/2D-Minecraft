<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2D Minecraft</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: sans-serif;
    }
    canvas {
      display: block;
      background-color: #87CEEB;
    }
    .controls {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
    }
    .controls button {
      width: 60px;
      height: 60px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background-color: #333;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <div class="controls">
    <button id="left">‚¨ÖÔ∏è</button>
    <button id="jump">‚¨ÜÔ∏è</button>
    <button id="right">‚û°Ô∏è</button>
    <button id="build">üõ†Ô∏è</button>
    <button id="attack">‚öîÔ∏è</button>
  </div>
  <script>
    // Set up canvas and context
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Game variables
    const tileSize = 40;
    const tilesX = Math.ceil(canvas.width / tileSize);
    const tilesY = Math.ceil(canvas.height / tileSize);
    const world = Array(tilesY).fill().map((_, y) =>
      Array(tilesX).fill(y > tilesY / 2 ? 1 : 0)
    );

    const player = {
      x: tilesX / 2,
      y: tilesY / 2 - 2,
      dx: 0,
      dy: 0,
      size: 1,
      onGround: false,
    };

    const gravity = 0.2;
    const jumpStrength = -5;
    const speed = 0.2;

    // Draw the world and player
    function drawWorld() {
      for (let y = 0; y < tilesY; y++) {
        for (let x = 0; x < tilesX; x++) {
          ctx.fillStyle = world[y][x] === 1 ? '#654321' : '#87CEEB';
          ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);
        }
      }
    }

    function drawPlayer() {
      ctx.fillStyle = 'red';
      ctx.fillRect(player.x * tileSize, player.y * tileSize, tileSize, tileSize);
    }

    function updatePlayer() {
      player.dy += gravity;
      player.x += player.dx;
      player.y += player.dy;

      // Collision detection
      const xTile = Math.floor(player.x);
      const yTile = Math.floor(player.y + player.size);
      if (world[yTile] && world[yTile][xTile] === 1) {
        player.y = Math.floor(player.y);
        player.dy = 0;
        player.onGround = true;
      } else {
        player.onGround = false;
      }
    }

    function placeBlock() {
      const xTile = Math.floor(player.x);
      const yTile = Math.floor(player.y + player.size);
      if (yTile < tilesY && xTile < tilesX) world[yTile][xTile] = 1;
    }

    function attack() {
      console.log('Attack action!');
    }

    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawWorld();
      drawPlayer();
      updatePlayer();
      requestAnimationFrame(gameLoop);
    }

    // Controls
    document.getElementById('left').addEventListener('mousedown', () => {
      player.dx = -speed;
    });
    document.getElementById('right').addEventListener('mousedown', () => {
      player.dx = speed;
    });
    document.getElementById('jump').addEventListener('mousedown', () => {
      if (player.onGround) player.dy = jumpStrength;
    });
    document.getElementById('build').addEventListener('mousedown', placeBlock);
    document.getElementById('attack').addEventListener('mousedown', attack);

    document.body.addEventListener('mouseup', () => {
      player.dx = 0;
    });

    // Start game loop
    gameLoop();
  </script>
</body>
</html>
